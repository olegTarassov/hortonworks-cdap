{
  "Clusters": {
    "desired_config": {
      "type": "{{ item }}",
      "tag": "version{{ ansible_date_time.epoch }}",
      "properties": {
        "access_logging" : "false",
        "logback-content" : "<configuration>\n    <logger name=\"org.apache.commons.beanutils\" level=\"ERROR\"/>\n    <logger name=\"org.apache.zookeeper.server\" level=\"ERROR\"/>\n    <logger name=\"org.apache.zookeeper\" level=\"ERROR\"/>\n    <logger name=\"com.ning\" level=\"WARN\"/>\n    <logger name=\"org.apache.spark\" level=\"WARN\"/>\n    <logger name=\"org.spark-project\" level=\"WARN\"/>\n    <logger name=\"org.apache.hadoop\" level=\"WARN\"/>\n    <logger name=\"org.apache.hadoop.ipc.Client\" level=\"ERROR\"/>\n    <logger name=\"org.apache.hive\" level=\"WARN\"/>\n    <logger name=\"org.quartz.core\" level=\"WARN\"/>\n    <logger name=\"org.eclipse.jetty\" level=\"WARN\"/>\n    <logger name=\"io.netty.util.internal\" level=\"WARN\"/>\n    <logger name=\"org.apache.twill\" level=\"INFO\"/>\n    <logger name=\"org.apache.twill.internal.kafka.client.SimpleKafkaConsumer\" level=\"WARN\"/>\n    <logger name=\"co.cask.cdap\" level=\"INFO\"/>\n\n    <appender name=\"Console\" class=\"ch.qos.logback.core.ConsoleAppender\">\n      <encoder>\n        <pattern>%d{ISO8601} - %-5p [%t:%C{1}@%L] - %m%n</pattern>\n      </encoder>\n    </appender>\n\n    <root level=\"ERROR\">\n      <appender-ref ref=\"Console\"/>\n    </root>\n{% raw %}{% if cdap_access_logging %}{% endraw %}\n\n    <appender name=\"AUDIT\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n      <file>access.log</file>\n      <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n        <fileNamePattern>access.log.%d{yyyy-MM-dd}</fileNamePattern>\n        <maxHistory>30</maxHistory>\n      </rollingPolicy>\n      <encoder>\n        <pattern>%msg%n</pattern>\n      </encoder>\n    </appender>\n    <logger name=\"http-access\" level=\"TRACE\" additivity=\"false\">\n      <appender-ref ref=\"AUDIT\" />\n    </logger>\n    <appender name=\"EXTERNAL_AUTH_AUDIT\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n      <file>external_auth_access.log</file>\n      <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n        <fileNamePattern>external_auth_access.log.%d{yyyy-MM-dd}</fileNamePattern>\n        <maxHistory>30</maxHistory>\n      </rollingPolicy>\n      <encoder>\n        <pattern>%msg%n</pattern>\n      </encoder>\n    </appender>\n    <logger name=\"external-auth-access\" level=\"TRACE\" additivity=\"false\">\n      <appender-ref ref=\"EXTERNAL_AUTH_AUDIT\" />\n    </logger>\n{% raw %}{% endif %}{% endraw %}\n\n</configuration>"
      }
    }
  }
}
